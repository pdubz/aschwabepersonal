$accounts = ((&"c:\salt\salt-call.exe" pillar.get sqltestcreds:usernames) | select-string -pattern "SqlServiceAcct").ToString().Trim().Split(",")$svc_acct = ($accounts | select-string -Pattern "APIServiceAcct").ToString().Split(":")[1]$SqlAcctName = ($accounts | select-string -Pattern "SqlServiceAcct").ToString().Split(":")[1]$DBAGroupName = ($accounts | select-string -Pattern "DBAGroup").ToString().Split(":")[1]$passwords = ((&"c:\salt\salt-call.exe" pillar.get sqltestcreds:passwords) | select-string -pattern "APIServiceAcct").ToString().Trim().Split(",")$svc_pw = ($passwords | select-string -Pattern "APIServiceAcct").ToString().Split(":")[1]$SQL_Sa_pas = ($passwords | select-string -Pattern "SqlSaAcct").ToString().Split(":")[1]$pw = $svc_pwnew-smbshare Backup $drive\backups01 -ErrorAction SilentlyContinueGrant-SmbShareAccess -name Backup -AccountName $Svc_Acct,$SQLAcctName,$DBAGroupName -AccessRight Full -Force#Set a Shared Folder for Restoresnew-smbshare Restore e:\restores01 -ErrorAction SilentlyContinueGrant-SmbShareAccess -name Restore -AccountName $Svc_Acct,$SQLAcctName,$DBAGroupName -AccessRight Full -Forcenew-smbshare ImportExport e:\ImportExport01 -ErrorAction SilentlyContinueGrant-SmbShareAccess -name ImportExport -AccountName $Svc_Acct,$SQLAcctName,$DBAGroupName -AccessRight Full -Forcenew-smbshare Data e:\data01 -ErrorAction SilentlyContinueGrant-SmbShareAccess -name Data -AccountName $Svc_Acct,$SQLAcctName,$DBAGroupName -AccessRight Full -Forcenew-smbshare Logs e:\logs01 -ErrorAction SilentlyContinueGrant-SmbShareAccess -name Logs -AccountName $Svc_Acct,$SQLAcctName,$DBAGroupName -AccessRight Full -Force 